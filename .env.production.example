### LightRAG Production Environment Configuration
### Copy this file to .env and update values for your VPS

###########################
### Server Configuration
###########################
HOST=0.0.0.0
PORT=9621
WEBUI_TITLE='LightRAG Knowledge Base'
WEBUI_DESCRIPTION="Advanced Graph-based RAG System"

### Server Performance
WORKERS=4
TIMEOUT=300

### CORS Settings (for frontend access)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

### SSL Configuration (if using reverse proxy)
# SSL=true
# SSL_CERTFILE=/path/to/cert.pem
# SSL_KEYFILE=/path/to/key.pem

###########################
### Directory Configuration
###########################
# These should match docker-compose volumes
INPUT_DIR=/app/data/inputs
WORKING_DIR=/app/data/rag_storage
TIKTOKEN_CACHE_DIR=/app/data/tiktoken

###########################
### LLM Configuration
###########################

### OpenAI API
OPENAI_API_KEY=sk-your-api-key-here

# Uncomment and configure for other OpenAI-compatible APIs:
# OPENAI_BASE_URL=https://api.openai.com/v1
# OPENAI_MODEL_NAME=gpt-4o-mini

### Ollama (local LLM)
# OLLAMA_BASE_URL=http://ollama:11434
# OLLAMA_MODEL_NAME=llama2
# OLLAMA_EMBEDDING_MODEL=nomic-embed-text

### Anthropic (Claude)
# ANTHROPIC_API_KEY=sk-ant-...

### Google Gemini
# GEMINI_API_KEY=...

### Other Providers (set as needed)
# ZHIPU_API_KEY=...
# GROQ_API_KEY=...

###########################
### Embedding Configuration
###########################
# Default: OpenAI text-embedding-3-small
# EMBEDDING_MODEL=text-embedding-3-small

# For Ollama embeddings:
# EMBEDDING_MODEL=nomic-embed-text
# EMBEDDING_BASE_URL=http://ollama:11434

###########################
### Vector Database
###########################
# Vector storage type: NanoVectorDBStorage (default), PGVectorStorage, etc.
# VECTOR_STORAGE_TYPE=NanoVectorDBStorage

###########################
### Graph Database
###########################
# Graph storage type: NetworkXStorage (default), Neo4JStorage, etc.
# GRAPH_STORAGE_TYPE=NetworkXStorage

# For Neo4J:
# NEO4J_URI=neo4j://localhost:7687
# NEO4J_USERNAME=neo4j
# NEO4J_PASSWORD=password

# For PostgreSQL:
# POSTGRES_CONNECTION_STRING=postgresql://user:password@localhost:5432/lightrag

###########################
### Authentication & Security
###########################
# Admin account - CHANGE THIS!
AUTH_ACCOUNTS=admin:strongly_change_this_password

# JWT Configuration
TOKEN_SECRET=your-very-secure-jwt-secret-key-change-this
TOKEN_EXPIRE_HOURS=48
GUEST_TOKEN_EXPIRE_HOURS=24
JWT_ALGORITHM=HS256

###########################
### Logging
###########################
LOG_LEVEL=INFO
VERBOSE=False
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5
LOG_DIR=/app/logs

###########################
### RAG Configuration
###########################
# Top K results for retrieval
TOP_K=60
CHUNK_TOP_K=20

# Maximum tokens for different components
MAX_ENTITY_TOKENS=6000
MAX_RELATION_TOKENS=8000
MAX_TOTAL_TOKENS=30000

# Maximum nodes to return from graph
MAX_GRAPH_NODES=1000

###########################
### Ollama Emulation (optional)
###########################
# If you want to use LightRAG with Ollama-compatible clients
OLLAMA_EMULATING_MODEL_NAME=lightrag
OLLAMA_EMULATING_MODEL_TAG=latest

###########################
### Advanced Features
###########################

### Reranker Configuration (optional)
# RERANKER_MODEL=BAAI/bge-reranker-v2-m3
# RERANKER_API_KEY=...

### Langfuse Observability (optional)
# LANGFUSE_SECRET_KEY=...
# LANGFUSE_PUBLIC_KEY=...
# LANGFUSE_HOST=https://cloud.langfuse.com
# LANGFUSE_ENABLE_TRACE=true

### Document Extraction
# TEXTRACT_ENABLED=true

###########################
### Performance Tuning
###########################
# Parallel processing
MAX_ASYNC=4
EMBEDDING_BATCH_NUM=32
EMBEDDING_FUNC_MAX_ASYNC=16

# Entity extraction
ENTITY_EXTRACT_MAX_GLEANING=1

###########################
### Cache Settings
###########################
# Enable LLM response caching
ENABLE_LLM_CACHE=true
ENABLE_LLM_CACHE_FOR_ENTITY_EXTRACT=true

# Question-Answer cache
ENABLE_EMBEDDING_CACHE=false
EMBEDDING_CACHE_SIMILARITY_THRESHOLD=0.95

###########################
### Resource Constraints
###########################
# Max parallel insert operations
MAX_PARALLEL_INSERT=4

# Chunk tokenization
CHUNK_TOKEN_SIZE=1200
CHUNK_OVERLAP_TOKEN_SIZE=100

###########################
### External Services (Optional)
###########################

### Slack Notifications
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...

### Database Backups
# BACKUP_ENABLED=true
# BACKUP_INTERVAL_HOURS=24
# BACKUP_DIR=/app/backups

###########################
### Monitoring & Debug
###########################
# Enable verbose output
DEBUG=False

# Performance monitoring
ENABLE_METRICS=true

###########################
### Database-Specific Config (if using external DBs)
###########################

### PostgreSQL
# POSTGRES_HOST=db.example.com
# POSTGRES_PORT=5432
# POSTGRES_DB=lightrag
# POSTGRES_USER=lightrag
# POSTGRES_PASSWORD=secure_password
# POSTGRES_POOL_SIZE=10

### Redis
# REDIS_HOST=redis.example.com
# REDIS_PORT=6379
# REDIS_DB=0
# REDIS_PASSWORD=
# REDIS_POOL_SIZE=10

### MongoDB
# MONGODB_URI=mongodb://user:password@mongo.example.com:27017/lightrag

###########################
### PostgreSQL + pgvector (Docker Compose Setup)
###########################
# When using docker-compose.full.yml, these are auto-configured
POSTGRES_CONNECTION_STRING=postgresql://lightrag:lightrag_secure_password_change_me@postgres:5432/lightrag
POSTGRES_PASSWORD=lightrag_secure_password_change_me
POSTGRES_PORT=5432

###########################
### Neo4j / DozerDB Graph Database
###########################
# Connection for Neo4j (Docker Compose)
NEO4J_URI=neo4j://neo4j:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=neo4j_secure_password_change_me
NEO4J_PORT=7687

###########################
### Storage Configuration
###########################
# When using docker-compose.full.yml, use these settings:
KV_STORAGE=PGKVStorage
VECTOR_STORAGE=PGVectorStorage
GRAPH_STORAGE=Neo4JStorage
DOC_STATUS_STORAGE=PGDocStatusStorage

###########################
### Data Mount Path
###########################
# Used by docker-compose.full.yml for volume binding
DATA_MOUNT_PATH=/opt/lightrag

###########################
### Development/Testing
###########################
# Only set these in development!
# TESTING_MODE=False
# MOCK_LLM=False
# SKIP_MODEL_VALIDATION=False

###########################
### Notes
###########################
# 1. Keep this file secure - it contains sensitive API keys
# 2. Never commit this file to git (use .env.example instead)
# 3. For multiple environments, use separate .env files
# 4. Use strong passwords for AUTH_ACCOUNTS
# 5. Rotate secrets regularly
# 6. Monitor API key usage and billing
# 7. Keep backups of important data
